class t extends EventTarget{#t=null;updTimeout=null;lstnrs=new Map;static dc(t){return JSON.parse(JSON.stringify(t))}static nested(t,e,s,r){const n=e.split("."),i=n.pop(),l=n.reduce(((t,e)=>t[e]=t[e]??{}),t);if("set"===r)l[i]=s;else{if("rm"!==r||!l||!l.hasOwnProperty(i))return l[i];delete l[i]}}#e=new Set;#s(t){this.updTimeout&&clearTimeout(this.updTimeout),this.#e.add(t),this.updTimeout=setTimeout((()=>{this.#r()}),100)}#r(){for(const t of this.#e){let e=`update:${t}`;this.hasEvtLstnr(e)&&this.emit(e,this.get(t)),this.#e.delete(t)}this.updTimeout=null}get(e){if(!this.#t)throw new Error("State is not loaded");const s=void 0===e?this.#t:t.nested(this.#t,e,null,"get");return s?t.dc(s):s}set(t,e){this.qset(t,e),this.#s(t)}qset(e,s){if(!this.#t)throw new Error("State is not loaded");__o.utils.type(e,"str")&&e.includes(".")?t.nested(this.#t,e,s,"set"):this.#t[e]=Array.isArray(this.#t[e])?[...this.#t[e],...s]:__o.utils.type(s,"obj")?{...this.#t[e],...s}:s}rm(e){if(!this.#t)throw new Error("State is not loaded");__o.utils.type(e,"str")&&e.includes(".")?t.nested(this.#t,e,null,"rm"):delete this.#t[e],this.emitSpecEvt(e,this.#t)}rs(){if(!this.#t)throw new Error("State is not loaded");this.#t=null,this.emit("rs",this.#t)}async ld(t){if(__o.utils.type(t,"str")&&""!==t)try{const e=await fetch(t);this.#t=await e.json()}catch(t){console.error("Error fetching data:",t)}else{if(!__o.utils.type(t,"obj"))throw new Error("Invalid data type. Expected a non-empty string or an object.");this.#t=t}}on(t,e){_c(this).on(t,e),this.#n(t,1)}off(t,e){_c(this).off(t,e),this.#n(t,-1)}emit(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}hasEvtLstnr(t){return this.lstnrs.has(t)&&this.lstnrs.get(t)>0}#n(t,e){this.lstnrs.has(t)||this.lstnrs.set(t,0),this.lstnrs.set(t,this.lstnrs.get(t)+e)}}let e=class t{_(t){return this===r&&console.warn("{ const: _o & fn: _n } is deprecated.\nPlease create a new one instead."),this.el=t,this.fdoc=!1,this.get(),this}#i;get(e,s){let r=e??this.el,{type:n}=t.utils;if(n(r,"inst",HTMLElement)||n(r,"inst",Window)||n(r,"inst",Document))return this.#i=r;if(n(r,"obj"))return this.#i=r;if(n(r,"str")){if(r.search(/^\w+:\/\//g)>-1&&-1==r.search(/\w+\[*\]/g))return;let t,e=this.fdoc?this.fdoc:document,s="querySelector";try{t=e[s](r)}catch(t){t&&console.error(t)}if(t)return this.#i=t}}qy(t){return this.#i=this.#i.querySelector(t),this}all(t,e){var s="querySelectorAll";return Array.from(e?this.get(t)[s](e):this.gt[s](t))}append(e,s){var r=t.utils.type,n=this.mk.bind(this);return r(e,"obj")||r(e,"inst",HTMLElement)?this.gt.appendChild(e):r(e,"emp")?n(this.el,s):r(this.el,"emp")?n(e,s):this.gt.appendChild(n(e,s)),this}mk(e,s){var r,n,i=t=>document.createElement(t),l="obj",o=t.utils.type;return this.el&&!o(this.el,"str")&&o(e,"unu")&&o(s,"unu")?n=i("div"):(n=o(e,l)?i(this.el):i(""==e?this.el:e),o(r=s??e,l)&&t.each(r,"k",(e=>{var s=r[e];"text"==e?n.innerText=s:"html"==e?n.innerHTML=s:"style"==e&&o(s,l)?t.each(s,"k",(t=>n.style[t]=s[t])):n.setAttribute(e,s)}))),n}qyp(t,e=document){let s=this.gt?.parentNode;const r=()=>{if("function"!=typeof s?.matches)return null;let n=s?.matches(t);return!s||s===e&&!n?null:n?s:(s=s.parentNode,r())},n=r();return this.#i=n??null,this}clone(t){return this.gt.cloneNode(t)}static delay(t,e){if("function"==typeof e)return setTimeout(e,t);clearTimeout(t)}delay(e,s){var r=s??this.el,n=t.delay(e,"function"==typeof r?r:0);return n||this}del(t){return t?this.gt.parentNode.removeChild(t):this.gt.remove(),this}attr(e=null,s,r){let n=this.gt;if(t.utils.type(e,"obj"))t.each(e,"e",(([e,s])=>{"text"==e?n.innerText=s:"html"==e?n.innerHTML=s:"style"==e&&t.utils.type(s,"obj")?this.css(s):(null!=s||null!=s)&&n.setAttribute(e,s)}));else if("text"==e){if(void 0===s)return n.innerText;n.innerText=s}else if("html"==e){if(null==s)return n.innerHTML;n.innerHTML=s}else if(r||"r"===r)n.removeAttribute(e);else{if(null==s)return null!=e?this.gat(e):n.attributes;n.setAttribute(e,s)}return this}gat=t=>this.gt.attributes[t]?.value;nattr(e,s,r){let n=this.gt,i=n?.isConnected,l=n?.attributes,o=n[(/^r$/.test(r)?"remove":"set")+"Attribute"].bind(n),a=t.utils.type,u=t=>n.hasOwnProperty(t)||/^\w+[A-Z]\w+$/.test(t);if(a(e,"unu"))return l;let c=t=>"inner"+("html"==t?"HTML":"Text"),h=t=>/^(html|text)$/.test(t);if(a(e,"str")){const t=e;e="r"==r?[t]:{[t]:s}}if(a(e,"obj")&&t.each(e,"e",(([t,e])=>{i&&u(t)?n[t]=e:h(t)?n[c(t)]=e:"class"==t&&a(e,"obj")?this.class(e):"style"==t&&a(e,"obj")?this.css(e):o(t,e)})),a(e,"arr")){if("r"!=r)return e.reduce(((t,e)=>(t[e]=i&&u(e)?n[e]:h(e)?n[c(e)]:l[e]?.value??null,t)),{});e.forEach((t=>o(t)))}return this}static each(e,s,r){const{utils:{type:n}}=t,i=n(e,"arr")||n(e,"set")||n(e,"wSet")||n(e,"map")||n(e,"wMap")||n(e,"obj"),l=t=>{var e=n(s,"str")?r:s;n(e,"fn")&&i&&t.forEach(((t,s)=>e(t,s)))};return n(s,"fn")?l(i&&!e.item?e:Array.prototype.slice.call(e)):n(s,"str")&&l(Object[s+("k"==s?"eys":"v"==s?"alues":"e"==s?"ntries":1)](e)),this}each=t.each;class(e,s,...r){const{utils:{type:n}}=t,i=e,l=t=>/^(add|remove|toggle)$/.test(t),o=this.gt.classList;if(n(i,"str")&&l(i))o[i](s,...r);else{if(!n(i,"obj"))return o;t.each(i,"e",(([t,e])=>l(t)?o[t](...n(e,"arr")?e:[e]):0))}return this}css(e=0,s=null,r){var n=this.gt.style,i=e,l=s,o=t.utils.type;if(0==i&&null==l)return n;if(o(i,"obj"))t.each(i,"e",(t=>n.setProperty(...t)));else if(o(i,"str")&&/:/g.test(i)){let t=i.split(";");for(let e of t){let t=e.indexOf(":"),s=e.substring(0,t).trim().replace(/-([a-z])/g,((t,e)=>e.toUpperCase()));n[s]=e.substring(t+1).trim()}}else if("r"===r)o(i,"str")&&(i=[i]),o(i,"arr")&&i.forEach((t=>n.removeProperty(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())));else{if(null===l)return n[i];n[i]=l}return this}gcs(e,s=null,r=null){var n=null==r?this.gt:this.get(e),i=null==r?e:s,l=r||s;return t.gcs(n,l,i)}static gcs(e,r=null,n=null){var i=e instanceof t?e:s(e).gt,l=window.getComputedStyle(i,n);return r?l.getPropertyValue(r):l}get rect(){return this.gt.getBoundingClientRect()}hide(t){var e="_o-show",s=t=>this.attr(e,t).css("display",t?"block":"none");return t?"b"==t?s(1):"n"==t&&s(0):s("false"==this.gat(e)?1:0),this}val(t=null){return null!==t&&(this.gt.value=t),null==t?this.gt.value:this}txt(t=null){return null!==t&&(this.gt.textContent=t),null==t?this.gt.textContent:this}on(t,e,s){return this.#l(1,t,e,s)}off(t,e,s){return this.#l(0,t,e,s)}#l(e,s,r,n){const i=(1==e?"add":"remove")+"EventListener",{type:l}=t.utils,o=this.gt;return l(s,"obj")?t.each(s,"e",(([t,e])=>o[i](t,...l(e,"obj")?[e.f??e.fn,e.o??e.opt]:[e,r]))):o[i](s,r,n),this}static hw=t=>{var e="Height",s="Width",r="offset",n="outer",i="inner",l=window,o=(t,e)=>({h:t,w:e});return"e"==t?o(this.gt[r+e],this.gt[r+s]):"o"==t?o(l[n+e],l[n+s]):o(l[i+e],l[i+s])};hw=t.hw;frame(t=null){var e=this.gt.contentWindow??this.gt.contentDocument;return null==t?e:"doc"==t?e.document:("object"==typeof t&&e.document&&(this.fdoc=e.document,t.el&&this.get(t.el)),this)}frameEl(t){return this.#i=window.frameElement,t?this.attr(t):this}parent(t){var e=parent.document;return e?this.fdoc=e:"doc"!=t&&(this.#i=this.gt.parentNode),"doc"==t?e:this}canvas=(t,e)=>this.gt.getContext(t);atl(t){return alert(t),this}static async fetch(e={},s){let{url:r,method:n,body:i,head:l,type:o,username:a,password:u,cb:c}=e,h="headers";const{type:d}=t.utils;s=s??c;const p={method:n??o,headers:l,body:i};let f;a&&u&&(p[h]=p[h]||{},p[h].Authorization="Basic "+btoa(a+":"+u));try{const t=await fetch(r,p),e=t[h].get("content-type");let s=e.includes("application/json")?await t.json():e.includes("text")?await t.text():await t.blob();f={status:t.status,data:s}}catch(t){f={status:0,data:t.message}}if(!d(s,"fn"))return f;s(f)}json(t,e,s=0){throw new Error("use static json (__o.json)\nstop using this inst __o' json method")}static json(e,s,...r){const n=t.utils.type;var i=(t,e)=>{var s=!1;if("s"===t)s=JSON.stringify(e,...r);else if("p"===t)try{s=JSON.parse(e,...r)}catch(t){}return s};return n(e,"obj")||n(e,"arr")?i("s",e):n(e,"str")?"p"!=e&&"s"!=e||n(s,"unu")?i("p",e):i(e,s):void 0}open(t=null,e=null){var s=null==t||""!=t?t:"_blank",r=null==t&&""!=e?e:null;window.open(this.el,s,r)}get gt(){return this.#i}static mkEl=(t,e,...s)=>({type:t,props:e||{},children:s||[]});static mknode(e,r){const{utils:{type:n},log:i,_pEl:l}=t,o=(t,e)=>t.map((t=>e+t)),a=["svg","path","circle","clipPath","defs","desc","ellipse","g","image","use","symbol","text","tspan","foreignObject","line","marker","mask","metadata","pattern","polygon","polyline","rect",...o(["","path"],"hatch"),...o(["","Motion","Transform"],"animate"),...o(["Blend","ColorMatrix","ComponentTransfer","Composite","ConvolveMatrix","DiffuseLighting","DisplacementMap","DistantLight","DropShadow","Flood","GaussianBlur","Image","Morphology","Offset","PointLight",...o(["A","B","G","R"],"Func"),...o(["","Node"],"Merge")],"fe")],u="Element",c=(t="",...e)=>document[`create${t}`](...e);const h=t=>/^(forceUpdate|children|id|class(Name|))$/.test(t);return function t(e){if(n(e,"unu"))return null;if(n(e,"str")||n(e,"num"))return c("TextNode",e);r&&i("__o.mknode_svg",e.type,a.indexOf(e.type));const o=l(e),{t:d,c:p,i:f}=o;r&&i("__o.mknode_p: ","el:",d,"c:",p,"i:",f);const m=c(...a.indexOf(d)>-1?[u+"NS","http://www.w3.org/2000/svg"]:[u],o.t);return function(t,e,r){let n={},i={},l={},o=s(e);e.__listen||(e.__listen={});["id","class"].forEach((t=>r[t[0]]?i[t]=r[t[0]]:0));for(const[s,i]of Object.entries(t))if(/^on/.test(s))l[s.slice(2).toLowerCase()]=e.__listen[s]=i;else if("textarea"==r.t&&"value"==s)o.val(i);else{if(h(s))continue;n[s]=i}o.nattr({...n,...i}).on(l)}(e.props,m,o),e.children&&m.append(...e.children.map(t).filter((t=>!!t))),m}(e)}static _pEl(e){const{utils:{type:s},log:r}=t;let n,i,l,o,a;const u=(s(e,"obj")?e.type:e)?.match(/([.#]?[\w-]+)(?![^\[]*\])/g);if(u){for(const t of u)t.startsWith("#")?l=t.slice(1):t.startsWith(".")?i=i?`${i} ${t.slice(1)}`:t.slice(1):n=t;return s(e,"obj")&&e.props&&(a=e.props,o=a.class?a.class:o,o=a.className?`${o?o+" ":""}${a.className}`:o,i=i?`${i}${o?" "+o:""}`:o,l=l??a.id),{t:n||"div",c:i,i:l}}}static cssvar(e=null,r=null,n=":root"){if(!e)return;const{utils:{type:i}}=t,l=(n?.gt??s(n).gt).style,o="etProperty",a=i(e,"obj"),u=i(e,"arr"),c=`g${o}Value`,h=`s${o}`;let d;return a?t.each(e,"e",(([t,e],s)=>l[h](`--${t}`,e))):d=u?e.reduce(((t,e)=>({...t,[e]:l[c](`--${e}`)})),{}):l[r?h:c](`--${e}`,r),d??this}cssvar(e=null,s=null){const r=t.cssvar(e,s,this);return r==t?this:r}static log=console.log.bind(console);constructor(t){null!=t&&this._(t)}};function s(t){return new e(t)}e.l=e.log,(async t=>{if(!t)throw new Error("util requires extens {./core.js}");t.utils={ider(){var t=()=>Math.floor(484*(1+Math.random())).toString(16).substring(1);return t()+t()+"-"+t()},math:{th:t=>1e3*(t??1),rNum(t,e,s){let r=Math.random()*(e-t)+t;return s?r:Math.floor(r)},per:{to:(t,e,s)=>s/(t-e)*100,from:(t,e,s)=>s/100*(t-e)},round(t,e,s=1){const r=Math.pow(10,e);return(1!==s?Math.floor(t*r):Math.ceil(t*r))/r}},Time:{delay(t,e,s){let{th:r,rNum:n}=__o.utils.math;return new Promise((function(i){setTimeout(i,r(e?n(t,e,s):t))}))},fmt(t,e,s=""){let r=__o.utils.type;if(r(t,"str")||r(t,"inst",Date)){const s=r(t,"str")?new Date(t):t;if(!r(s.getTime(),"num"))return;t=s.getTime(),e="ms"}if(!r(t,"num"))throw new Error("Invalid number (dur)");let n,i=Math.floor.bind(Math),l=t=>t<10?`0${t}`:t,o="",a=60,u=1e3,c=u*a,h=1440,d=(t,e)=>{o=t,s=s.replace(e,"")};switch(e){case"n":n=1e-6;break;case"mc":n=1/u;break;case"ms":n=1;break;case"s":n=u;break;case"m":n=c;break;case"h":n=c*a;break;case"d":n=c*h;break;case"mn":n=c*h*30;break;case"y":n=c*h*30*12;break;default:return}const p=t*n,f=i(p/u),m=i(f/a),y=i(m/a),g=i(y/24),b=i(g/30),w=i(b/12),v=l(w),$=l(b%12),_=l(g%30),j=l(y%24),E=l(m%a),T=l(f%a),x=l(i(p%u));switch(s.endsWith(".ms")&&d(`.${x}`,".ms"),s.endsWith(":s")&&d(":"+T+o,"s"),s){case"ms":return p;case"s":return p/u;case"m":return f/a;case"h":return m/a;case"d":return y/24;case"mn":return g/30;case"y":return b/12;case"m:":return`${l(m)}${o}`;case"h:m:":return`${l(y)}:${E}${o}`;case"d:h:m:":return`${l(g)}:${j}:${E}${o}`;case"mn:d:h:m:":return`${l(b)}:${_}:${j}:${E}${o}`;case"y:mn:d:h:m:":return`${v}:${$}:${_}:${j}:${E}${o}`;case"y:mn:d:h:m":return`${v}:${$}:${_}:${j}:${E}`;case"y:mn:d:h":return`${v}:${$}:${_}:${j}`;case"y:mn:d":return`${v}:${$}:${_}`;case"y:mn":return`${v}:${$}`;case"auto":return[[w,v],[b,$],[g,_],[y,j],[m,E],[f,T,"."]].map((t=>((t,e,s=":")=>t>0?e+s:"")(...t))).concat([`${x}`]).join("");default:return{ms:p,s:f,m:m,h:y,d:g,mn:b,y:w,fy:v,fmn:$,fd:_,fh:j,fm:E,fs:T,fms:x}}}},copy(t,e){for(let s of Reflect.ownKeys(e))if("constructor"!==s&&"prototype"!==s&&"name"!==s){let r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r)}},equal(t,e,s){if(t===e)return!0;if("object"==typeof t&&null!=t&&"object"==typeof e&&null!=e){if(Object.keys(t).length!=Object.keys(e).length)return 1==s&&(t[r]=e[r]);for(var r in t){var n=()=>"string"==typeof e[r]?t[r]=`${e[r]}`:this.copy(t[r],e[r]);if(!e.hasOwnProperty(r))return 1==s&&n();this.equal(t[r],e[r])||1==s&&n()}return!0}return 1==s&&(t=e)},splAr(t=[]){return t.prototype.intersection=t=>{this.filter((e=>t.includes(e)))},t.prototype.difference=t=>{this.filter((e=>!t.includes(e)))},t.prototype.symmetricDifference=t=>{this.filter((e=>!t.includes(e))).concat(t.filter((t=>!this.includes(t))))},t},type(t,e,s){let r,n="number",i="object",l="function",o="string",a="symbol",u=e=>isNaN(t),c=e=>t instanceof e,h=e=>Array.isArray(t),d=null,p=e=>typeof t===e,f=t=>e===t;return f("int")?Number.isInteger(t):f("float")||f(".1")||f(.1)?p(n)&&!u()&&t%1!=0:f("num")||f(n)?p(n)&&!u():f("bigint")?p(t):f("-")?t<0:f("+")?t>0:f("array")||f("arr")?h():f("null")||f("nl")?t===d:f("ud")?t===r:f("unu")?t===d||t===r:f("emp")?t===d||t===r||""===t:f("bool")?p("boolean"):f("str")||f(o)?p(o):f("func")||f("fn")||f(l)?p(l):f("obj")||f(i)?p(i)&&!h()&&t!==d:f("set")?c(Set):f("map")?c(Map):f("wSet")?c(WeakSet):f("wMap")?c(WeakMap):f("inst")?c(s):f("sym")||f(a)?p(a):f("date")?c(Date):f("regexp")||f("rx")?c(RegExp):f("promise")||f("prm")?c(Promise):f("error")||f("err")?c(Error):r}},t.utils.Time.ctime=t.utils.Time.fmt})(e),e._State=t;const r=new e;function n(t){return r._(t)}r.g=r.get,r.l=r.log,r.h=r.hide,r.at=r.attr,r.fr=r.frame,r.make=r.mk;export{e as __o,s as _c,n as _n,r as _o};