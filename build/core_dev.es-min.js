class t extends EventTarget{#t=null;updTimeout=null;lstnrs=new Map;static dc(t){return JSON.parse(JSON.stringify(t))}static nested(t,e,r,s){const n=e.split("."),i=n.pop(),l=n.reduce(((t,e)=>t[e]=t[e]??{}),t);if("set"===s)l[i]=r;else{if("rm"!==s||!l||!l.hasOwnProperty(i))return l[i];delete l[i]}}#e=new Set;#r(t){this.updTimeout&&clearTimeout(this.updTimeout),this.#e.add(t),this.updTimeout=setTimeout((()=>{this.#s()}),100)}#s(){for(const t of this.#e){let e=`update:${t}`;this.hasEvtLstnr(e)&&this.emit(e,this.get(t)),this.#e.delete(t)}this.updTimeout=null}get(e){if(!this.#t)throw new Error("State is not loaded");const r=void 0===e?this.#t:t.nested(this.#t,e,null,"get");return r?t.dc(r):r}set(t,e){this.qset(t,e),this.#r(t)}qset(e,r){if(!this.#t)throw new Error("State is not loaded");__o.utils.type(e,"str")&&e.includes(".")?t.nested(this.#t,e,r,"set"):this.#t[e]=Array.isArray(this.#t[e])?[...this.#t[e],...r]:__o.utils.type(r,"obj")?{...this.#t[e],...r}:r}rm(e){if(!this.#t)throw new Error("State is not loaded");__o.utils.type(e,"str")&&e.includes(".")?t.nested(this.#t,e,null,"rm"):delete this.#t[e],this.emitSpecEvt(e,this.#t)}rs(){if(!this.#t)throw new Error("State is not loaded");this.#t=null,this.emit("rs",this.#t)}async ld(t){if(__o.utils.type(t,"str")&&""!==t)try{const e=await fetch(t);this.#t=await e.json()}catch(t){console.error("Error fetching data:",t)}else{if(!__o.utils.type(t,"obj"))throw new Error("Invalid data type. Expected a non-empty string or an object.");this.#t=t}}on(t,e){_c(this).on(t,e),this.#n(t,1)}off(t,e){_c(this).off(t,e),this.#n(t,-1)}emit(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}hasEvtLstnr(t){return this.lstnrs.has(t)&&this.lstnrs.get(t)>0}#n(t,e){this.lstnrs.has(t)||this.lstnrs.set(t,0),this.lstnrs.set(t,this.lstnrs.get(t)+e)}}let e=class t{_(t){return this===s&&console.warn("{ const: _o & fn: _n } is deprecated.\nPlease create a new one instead."),this.el=t,this.fdoc=!1,this.get(),this}#i;get(e,r){let s=e??this.el,{type:n}=t.utils;if(n(s,"inst",HTMLElement)||n(s,"inst",Window)||n(s,"inst",Document))return this.#i=s;if(n(s,"obj"))return this.#i=s;if(n(s,"str")){if(s.search(/^\w+:\/\//g)>-1&&-1==s.search(/\w+\[*\]/g))return;let t,e=this.fdoc?this.fdoc:document,r="querySelector";try{t=e[r](s)}catch(t){t&&console.error(t)}if(t)return this.#i=t}}qy(t){return this.#i=this.#i.querySelector(t),this}all(t,e){var r="querySelectorAll";return Array.from(e?this.get(t)[r](e):this.gt[r](t))}append(e,r){var s=t.utils.type,n=this.mk.bind(this);return s(e,"obj")||s(e,"inst",HTMLElement)?this.gt.appendChild(e):s(e,"emp")?n(this.el,r):s(this.el,"emp")?n(e,r):this.gt.appendChild(n(e,r)),this}prepend(t,e,r){let s=this.mk,n=this.gt;var i=(...t)=>n.insertBefore(...t),l=(...t)=>n.childNodes(...t),o=t=>null==t?0:t;let a="object"==typeof t?i(t,"number"==typeof e?l[o(e)]:e):i(s(t,e),"number"==typeof r?l[o(r)]:r);return this.add=()=>a,this}mk(e,r){var s,n,i=t=>document.createElement(t),l="obj",o=t.utils.type;return this.el&&!o(this.el,"str")&&o(e,"unu")&&o(r,"unu")?n=i("div"):(n=o(e,l)?i(this.el):i(""==e?this.el:e),o(s=r??e,l)&&t.each(s,"k",(e=>{var r=s[e];"text"==e?n.innerText=r:"html"==e?n.innerHTML=r:"style"==e&&o(r,l)?t.each(r,"k",(t=>n.style[t]=r[t])):n.setAttribute(e,r)}))),n}qyp(t,e=document){let r=this.gt?.parentNode;const s=()=>{if("function"!=typeof r?.matches)return null;let n=r?.matches(t);return!r||r===e&&!n?null:n?r:(r=r.parentNode,s())},n=s();return this.#i=n??null,this}clone(t){return this.gt.cloneNode(t)}static delay(t,e){if("function"==typeof e)return setTimeout(e,t);clearTimeout(t)}delay(e,r){var s=r??this.el,n=t.delay(e,"function"==typeof s?s:0);return n||this}del(t){return t?this.gt.parentNode.removeChild(t):this.gt.remove(),this}attr(e=null,r,s){let n=this.gt;if(t.utils.type(e,"obj"))t.each(e,"e",(([e,r])=>{"text"==e?n.innerText=r:"html"==e?n.innerHTML=r:"style"==e&&t.utils.type(r,"obj")?this.css(r):(null!=r||null!=r)&&n.setAttribute(e,r)}));else if("text"==e){if(void 0===r)return n.innerText;n.innerText=r}else if("html"==e){if(null==r)return n.innerHTML;n.innerHTML=r}else if(s||"r"===s)n.removeAttribute(e);else{if(null==r)return null!=e?this.gat(e):n.attributes;n.setAttribute(e,r)}return this}gat=t=>this.gt.attributes[t]?.value;nattr(e,r,s){let n=this.gt,i=n?.isConnected,l=n?.attributes,o=n[(/^r$/.test(s)?"remove":"set")+"Attribute"].bind(n),a=t.utils.type,u=t=>n.hasOwnProperty(t)||/^\w+[A-Z]\w+$/.test(t);if(a(e,"unu"))return l;let c=t=>"inner"+("html"==t?"HTML":"Text"),h=t=>/^(html|text)$/.test(t);if(a(e,"str")){const t=e;e="r"==s?[t]:{[t]:r}}if(a(e,"obj")&&t.each(e,"e",(([t,e])=>{i&&u(t)?n[t]=e:h(t)?n[c(t)]=e:"class"==t&&a(e,"obj")?this.class(e):"style"==t&&a(e,"obj")?this.css(e):o(t,e)})),a(e,"arr")){if("r"!=s)return e.reduce(((t,e)=>(t[e]=i&&u(e)?n[e]:h(e)?n[c(e)]:l[e]?.value??null,t)),{});e.forEach((t=>o(t)))}return this}static each(e,r,s){const{utils:{type:n}}=t,i=n(e,"arr")||n(e,"set")||n(e,"wSet")||n(e,"map")||n(e,"wMap")||n(e,"obj"),l=t=>{var e=n(r,"str")?s:r;n(e,"fn")&&i&&t.forEach(((t,r)=>e(t,r)))};return n(r,"fn")?l(i&&!e.item?e:Array.prototype.slice.call(e)):n(r,"str")&&l(Object[r+("k"==r?"eys":"v"==r?"alues":"e"==r?"ntries":1)](e)),this}each=t.each;class(e,r,...s){const{utils:{type:n}}=t,i=e,l=t=>/^(add|remove|toggle)$/.test(t),o=this.gt.classList;if(n(i,"str")&&l(i))o[i](r,...s);else{if(!n(i,"obj"))return o;t.each(i,"e",(([t,e])=>l(t)?o[t](...n(e,"arr")?e:[e]):0))}return this}css(e=0,r=null,s){var n=this.gt.style,i=e,l=r,o=t.utils.type;if(0==i&&null==l)return n;if(o(i,"obj"))t.each(i,"e",(t=>n.setProperty(...t)));else if(o(i,"str")&&/:/g.test(i)){let t=i.split(";");for(let e of t){let t=e.indexOf(":"),r=e.substring(0,t).trim().replace(/-([a-z])/g,((t,e)=>e.toUpperCase()));n[r]=e.substring(t+1).trim()}}else if("r"===s)o(i,"str")&&(i=[i]),o(i,"arr")&&i.forEach((t=>n.removeProperty(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())));else{if(null===l)return n[i];n[i]=l}return this}gcs(e,r=null,s=null){var n=null==s?this.gt:this.get(e),i=null==s?e:r,l=s||r;return t.gcs(n,l,i)}static gcs(e,s=null,n=null){var i=e instanceof t?e:r(e).gt,l=window.getComputedStyle(i,n);return s?l.getPropertyValue(s):l}get rect(){return this.gt.getBoundingClientRect()}hide(t){var e="_o-show",r=t=>this.attr(e,t).css("display",t?"block":"none");return t?"b"==t?r(1):"n"==t&&r(0):r("false"==this.gat(e)?1:0),this}val(t=null){return null!==t&&(this.gt.value=t),null==t?this.gt.value:this}av(t,e=null){return null!==e&&(this.gt[t]=e),null==e?this.gt[t]:this}txt(t=null){return null!==t&&(this.gt.textContent=t),null==t?this.gt.textContent:this}on(t,e,r){return this.#l(1,t,e,r)}off(t,e,r){return this.#l(0,t,e,r)}#l(e,r,s,n){const i=(1==e?"add":"remove")+"EventListener",{type:l}=t.utils,o=this.gt;return l(r,"obj")?t.each(r,"e",(([t,e])=>o[i](t,...l(e,"obj")?[e.f??e.fn,e.o??e.opt]:[e,s]))):o[i](r,s,n),this}static hw=t=>{var e="Height",r="Width",s="offset",n="outer",i="inner",l=window,o=(t,e)=>({h:t,w:e});return"e"==t?o(this.gt[s+e],this.gt[s+r]):"o"==t?o(l[n+e],l[n+r]):o(l[i+e],l[i+r])};hw=t.hw;frame(t=null){var e=this.gt.contentWindow??this.gt.contentDocument;return null==t?e:"doc"==t?e.document:("object"==typeof t&&e.document&&(this.fdoc=e.document,t.el&&this.get(t.el)),this)}frameEl(t){return this.#i=window.frameElement,t?this.attr(t):this}parent(t){var e=parent.document;return e?this.fdoc=e:"doc"!=t&&(this.#i=this.gt.parentNode),"doc"==t?e:this}canvas=(t,e)=>this.gt.getContext(t);atl(t){return alert(t),this}static async fetch(e={},r){let{url:s,method:n,body:i,head:l,type:o,username:a,password:u,cb:c}=e,h="headers";const{type:f}=t.utils;r=r??c;const d={method:n??o,headers:l,body:i};let p;a&&u&&(d[h]=d[h]||{},d[h].Authorization="Basic "+btoa(a+":"+u));try{const t=await fetch(s,d),e=t[h].get("content-type");let r=e.includes("application/json")?await t.json():e.includes("text")?await t.text():await t.blob();p={status:t.status,data:r}}catch(t){p={status:0,data:t.message}}if(!f(r,"fn"))return p;r(p)}json(t,e,r=0){throw new Error("use static json (__o.json)\nstop using this inst __o' json method")}static json(e,r,...s){const n=t.utils.type;var i=(t,e)=>{var r=!1;if("s"===t)r=JSON.stringify(e,...s);else if("p"===t)try{r=JSON.parse(e,...s)}catch(t){}return r};return n(e,"obj")||n(e,"arr")?i("s",e):n(e,"str")?"p"!=e&&"s"!=e||n(r,"unu")?i("p",e):i(e,r):void 0}ws(t,e){var r=this.el,s=""!=t&&t?{p:t,li:r}:{li:r};return""==e&&e||(s.ex=e),new _ws(s)}static worker(t){return t=t??{},Worker?t.id?("work"==t.type?t.id=new Worker(t.run):"share"==t.type&&(work.id=new SharedWorker(t.run)),t.id):(t.id?.terminate(),t.id=null,this):"Browser not supported. Web Worker required"}static storage(t){var e=Object.keys(t)[1];if("undefined"==typeof Storage)return"Browser not supported. Web Storage required";var r="l"===t.t?localStorage:"s"===t.t?sessionStorage:null;if(r)if("set"===e)r.setItem(t.set);else{if("get"===e)return r.getItem(t.get);"del"===e&&r.removeItem(t.get)}return this}fulScr(){var t=this.gt,e=(e,r)=>t[e+(r?"xitFullscreen":"equestFullscreen")],s="webkit";t.elf&&0==t.elf?e("r")?e("r")():e(s+"R")&&e(s+"R")():e("e",1)?e("e",1)():e(s+"E",1)&&e(s+"E",1)(),this.elf=t;var n=[parent.document,window.frameElement,window],i=this.elf==n[0]?n[0]:this.elf==n[1]?n[1]:n[2];return["ff","n"].forEach((t=>r(i)[t]("fullscreenchange",this.isfulScr.bind(this)))),this}isfulScr(){var t=document.fullscreenElement;return null!=this.elf&&"object"==typeof this.elf&&(this.elf.full=!!t),document.fullscreen}open(t=null,e=null){var r=null==t||""!=t?t:"_blank",s=null==t&&""!=e?e:null;window.open(this.el,r,s)}static reqAnima(t){return(0,window.requestAnimationFrame)(t)}reqAnima=t.reqAnima;static delAnima(t){return window.cancelAnimationFrame(t),this}delAnima=t.delAnima;get gt(){return this.#i}getStm(t=null){let e=this.gt,r=t=>e[t+"aptureStream"],s=t=>r(t)(0),n="mozC",i=r("c")?s("c"):r(n)?s(n):null;return null!=t&&i?t.srcObject=i:console.error("Stream capture is not supported"),i}src(t=null){var e=this.gt,r="srcObject";return null==t?e[r]:(e[r]=""==t?null:t,this)}stop(t){("object"==typeof t?t:r(t).src()).getTracks().forEach((t=>t.stop())),"string"==typeof t&&r(t).src("")}static mkObs(e,r,s=null){const{utils:{type:n}}=t;let i={root:null,rootMargin:"0px",threshold:[0]};n(s,"obj")&&this.each(s,"e",(([t,e])=>i[t]=n(e,"func")?e():e));let l=new IntersectionObserver(r,i);return n(e,"inst",HTMLElement)&&l.observe(e),l}static mkMObs(e,r,s=null){const{utils:{type:n}}=t,i={childList:!1,attributes:!1,characterData:!1,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:null};n(s,"obj")&&this.each(s,"e",(([t,e])=>i[t]=n(e,"func")?e():e));let l=new MutationObserver(e);return l.opts=i,n(r,"inst",HTMLElement)&&l.observe(r,i),l}static mkEl=(t,e,...r)=>({type:t,props:e||{},children:r||[]});static mknode(e,s){const{utils:{type:n},log:i,_pEl:l}=t,o=(t,e)=>t.map((t=>e+t)),a=["svg","path","circle","clipPath","defs","desc","ellipse","g","image","use","symbol","text","tspan","foreignObject","line","marker","mask","metadata","pattern","polygon","polyline","rect",...o(["","path"],"hatch"),...o(["","Motion","Transform"],"animate"),...o(["Blend","ColorMatrix","ComponentTransfer","Composite","ConvolveMatrix","DiffuseLighting","DisplacementMap","DistantLight","DropShadow","Flood","GaussianBlur","Image","Morphology","Offset","PointLight",...o(["A","B","G","R"],"Func"),...o(["","Node"],"Merge")],"fe")],u="Element",c=(t="",...e)=>document[`create${t}`](...e);const h=t=>/^(forceUpdate|children|id|class(Name|))$/.test(t);return function t(e){if(n(e,"unu"))return null;if(n(e,"str")||n(e,"num"))return c("TextNode",e);s&&i("__o.mknode_svg",e.type,a.indexOf(e.type));const o=l(e),{t:f,c:d,i:p}=o;s&&i("__o.mknode_p: ","el:",f,"c:",d,"i:",p);const m=c(...a.indexOf(f)>-1?[u+"NS","http://www.w3.org/2000/svg"]:[u],o.t);return function(t,e,s){let n={},i={},l={},o=r(e);e.__listen||(e.__listen={});["id","class"].forEach((t=>s[t[0]]?i[t]=s[t[0]]:0));for(const[r,i]of Object.entries(t))if(/^on/.test(r))l[r.slice(2).toLowerCase()]=e.__listen[r]=i;else if("textarea"==s.t&&"value"==r)o.val(i);else{if(h(r))continue;n[r]=i}o.nattr({...n,...i}).on(l)}(e.props,m,o),e.children&&m.append(...e.children.map(t).filter((t=>!!t))),m}(e)}static _pEl(e){const{utils:{type:r},log:s}=t;let n,i,l,o,a;const u=(r(e,"obj")?e.type:e)?.match(/([.#]?[\w-]+)(?![^\[]*\])/g);if(u){for(const t of u)t.startsWith("#")?l=t.slice(1):t.startsWith(".")?i=i?`${i} ${t.slice(1)}`:t.slice(1):n=t;return r(e,"obj")&&e.props&&(a=e.props,o=a.class?a.class:o,o=a.className?`${o?o+" ":""}${a.className}`:o,i=i?`${i}${o?" "+o:""}`:o,l=l??a.id),{t:n||"div",c:i,i:l}}}static cssvar(e=null,s=null,n=":root"){if(!e)return;const{utils:{type:i}}=t,l=(n?.gt??r(n).gt).style,o="etProperty",a=i(e,"obj"),u=i(e,"arr"),c=`g${o}Value`,h=`s${o}`;let f;return a?t.each(e,"e",(([t,e],r)=>l[h](`--${t}`,e))):f=u?e.reduce(((t,e)=>({...t,[e]:l[c](`--${e}`)})),{}):l[s?h:c](`--${e}`,s),f??this}cssvar(e=null,r=null){const s=t.cssvar(e,r,this);return s==t?this:s}static log=console.log.bind(console);constructor(t){null!=t&&this._(t)}};function r(t){return new e(t)}e.l=e.log,(async t=>{if(!t)throw new Error("util requires extens {./core.js}");t.utils={ider(){var t=()=>Math.floor(484*(1+Math.random())).toString(16).substring(1);return t()+t()+"-"+t()},math:{th:t=>1e3*(t??1),rNum(t,e,r){let s=Math.random()*(e-t)+t;return r?s:Math.floor(s)},per:{to:(t,e,r)=>r/(t-e)*100,from:(t,e,r)=>r/100*(t-e)},round(t,e,r=1){const s=Math.pow(10,e);return(1!==r?Math.floor(t*s):Math.ceil(t*s))/s}},Time:{delay(t,e,r){let{th:s,rNum:n}=__o.utils.math;return new Promise((function(i){setTimeout(i,s(e?n(t,e,r):t))}))},fmt(t,e,r=""){let s=__o.utils.type;if(s(t,"str")||s(t,"inst",Date)){const r=s(t,"str")?new Date(t):t;if(!s(r.getTime(),"num"))return;t=r.getTime(),e="ms"}if(!s(t,"num"))throw new Error("Invalid number (dur)");let n,i=Math.floor.bind(Math),l=t=>t<10?`0${t}`:t,o="",a=60,u=1e3,c=u*a,h=1440,f=(t,e)=>{o=t,r=r.replace(e,"")};switch(e){case"n":n=1e-6;break;case"mc":n=1/u;break;case"ms":n=1;break;case"s":n=u;break;case"m":n=c;break;case"h":n=c*a;break;case"d":n=c*h;break;case"mn":n=c*h*30;break;case"y":n=c*h*30*12;break;default:return}const d=t*n,p=i(d/u),m=i(p/a),g=i(m/a),y=i(g/24),b=i(y/30),w=i(b/12),v=l(w),_=l(b%12),E=l(y%30),j=l(g%24),$=l(m%a),k=l(p%a),x=l(i(d%u));switch(r.endsWith(".ms")&&f(`.${x}`,".ms"),r.endsWith(":s")&&f(":"+k+o,"s"),r){case"ms":return d;case"s":return d/u;case"m":return p/a;case"h":return m/a;case"d":return g/24;case"mn":return y/30;case"y":return b/12;case"m:":return`${l(m)}${o}`;case"h:m:":return`${l(g)}:${$}${o}`;case"d:h:m:":return`${l(y)}:${j}:${$}${o}`;case"mn:d:h:m:":return`${l(b)}:${E}:${j}:${$}${o}`;case"y:mn:d:h:m:":return`${v}:${_}:${E}:${j}:${$}${o}`;case"y:mn:d:h:m":return`${v}:${_}:${E}:${j}:${$}`;case"y:mn:d:h":return`${v}:${_}:${E}:${j}`;case"y:mn:d":return`${v}:${_}:${E}`;case"y:mn":return`${v}:${_}`;case"auto":return[[w,v],[b,_],[y,E],[g,j],[m,$],[p,k,"."]].map((t=>((t,e,r=":")=>t>0?e+r:"")(...t))).concat([`${x}`]).join("");default:return{ms:d,s:p,m:m,h:g,d:y,mn:b,y:w,fy:v,fmn:_,fd:E,fh:j,fm:$,fs:k,fms:x}}}},copy(t,e){for(let r of Reflect.ownKeys(e))if("constructor"!==r&&"prototype"!==r&&"name"!==r){let s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s)}},equal(t,e,r){if(t===e)return!0;if("object"==typeof t&&null!=t&&"object"==typeof e&&null!=e){if(Object.keys(t).length!=Object.keys(e).length)return 1==r&&(t[s]=e[s]);for(var s in t){var n=()=>"string"==typeof e[s]?t[s]=`${e[s]}`:this.copy(t[s],e[s]);if(!e.hasOwnProperty(s))return 1==r&&n();this.equal(t[s],e[s])||1==r&&n()}return!0}return 1==r&&(t=e)},splAr(t=[]){return t.prototype.intersection=t=>{this.filter((e=>t.includes(e)))},t.prototype.difference=t=>{this.filter((e=>!t.includes(e)))},t.prototype.symmetricDifference=t=>{this.filter((e=>!t.includes(e))).concat(t.filter((t=>!this.includes(t))))},t},type(t,e,r){let s,n="number",i="object",l="function",o="string",a="symbol",u=e=>isNaN(t),c=e=>t instanceof e,h=e=>Array.isArray(t),f=null,d=e=>typeof t===e,p=t=>e===t;return p("int")?Number.isInteger(t):p("float")||p(".1")||p(.1)?d(n)&&!u()&&t%1!=0:p("num")||p(n)?d(n)&&!u():p("bigint")?d(t):p("-")?t<0:p("+")?t>0:p("array")||p("arr")?h():p("null")||p("nl")?t===f:p("ud")?t===s:p("unu")?t===f||t===s:p("emp")?t===f||t===s||""===t:p("bool")?d("boolean"):p("str")||p(o)?d(o):p("func")||p("fn")||p(l)?d(l):p("obj")||p(i)?d(i)&&!h()&&t!==f:p("set")?c(Set):p("map")?c(Map):p("wSet")?c(WeakSet):p("wMap")?c(WeakMap):p("inst")?c(r):p("sym")||p(a)?d(a):p("date")?c(Date):p("regexp")||p("rx")?c(RegExp):p("promise")||p("prm")?c(Promise):p("error")||p("err")?c(Error):s}},t.utils.Time.ctime=t.utils.Time.fmt})(e),(async t=>{if(!t)throw new Error("vdom requires __o {mknode,mkEl,utils} {./core.js}");const{mknode:e,log:r,_pEl:s,utils:n,each:i}=t,l=t=>t?.length??t?.size,o=t=>0==l(Object.keys(t)),a=(t,e)=>t.split(";").forEach((t=>{const[r,s]=t.split(":").map(((t,e)=>(e?t:t.replace(/-([a-z])/g,((t,e)=>e.toUpperCase()))).trim()));r&&s&&e.set(r,s)})),u=t=>t.slice(2).toLowerCase(),c=e=>e?.__listen&&!o(e?.__listen??{})?new t(e).off(Object.fromEntries(Object.entries(e.__listen).map((([t,e])=>[u(t),e])))):0;function h(f,d,p,m={}){const{type:g}=n,{dbg:y}=m;let b;if(y&&g(d,"obj")&&d.type&&r("__vd_p",f,d.type,"parse",s(d)),!f&&g(d,"obj"))return e(d,y);if(!f&&(g(d,"str")||g(d,"num")))return new Text(d);try{b=function(e,c,h,f={}){const{type:d}=n,{root:p,force:m,dbg:g}=f;if(d(c,"unu"))return{rm:!0};const y=d(e,"inst",HTMLElement)?1:d(e,"inst",Text)?2:0;if(d(c,"str")||d(c,"num"))return(2==y?e.textContent!==c:h!==c)?e.textContent=c:0;const[b,w]=[c,h].map((t=>d(t,"obj")?s(t):0));g&&r("comp",e,c,h,b,w);if(d(c,"obj")&&e&&e?.tagName?.toLowerCase()!==b.t)return{tag:!0};const v=new t(e);e.__listen||(e.__listen={});const _=e.__listen,E=e.attributes,j=/^([a-z]+(?:[A-Z][a-z]+)+|value|checked|disabled|readonly|style)$/,[$,k,x,T,M]=Array(5).fill().map((t=>new Map));a(e.style.cssText,M),i(c.props,"e",(([t,r])=>{"style"===t?r&&(d(r,"str")?a(r,T):i(r,"e",(t=>T.set(...t)))):/^(class(Name)?|id|text)$/g.test(t)||(/^html$/g.test(t)?r!=e.innerHtml&&v.nattr("html",r):(t.startsWith("on")?$:/viewBox/.test(t)?k:j.test(t)?x:k).set(t,r))})),b.i&&k.set("id",b.i);g&&(r("comp_p",b,w),r("fevts",$,"fprop",x,"fattr",k,"fcss",T,"ecss",M),r("comp_el",v.gt.outerHTML));if(l(k)||l(E)){let[t,e]=[{},[]];for(let[e,r]of k)E[e]?.value!==r&&(t[e]=r);for(let t of E)/^class$/.test(t.name)||j.test(t.name)||k.has(t.name)||e.push(t.name);!o(t)&&v.nattr(t),l(e)>0&&v.nattr(e,0,"r")}const S=new Set(v.class()),O=new Set(b.c?b.c.split(/\s+/):[]);if(l(S)||l(O)){let t={},e=(t,e,r)=>[t,[...e].filter((t=>!r.has(t)))];[["add",O,S],["remove",S,O]].map((t=>e(...t))).forEach((([e,r])=>r.length?t[e]=r:0)),o(t)||v.class(t)}if(l(T)||l(M)){let[t,e]=[{},[]];for(let[e,r]of T)(!M.has(e)||M.has(e)&&M.get(e)!==r)&&(t[e]=r);for(let[t,r]of M)T.has(t)||e.push(t);l(e)&&v.css(e,0,"r"),o(t)||v.css(t)}for(let[t,r]of x)e[t]!==r&&(e[t]=r);if(l($)||!o(_)){let[t,s,n]=Array(3).fill().map((t=>new Set));for(let[e,r]of $)_[e]?_[e]&&_[e]?.toString()!==r?.toString()&&n.add(e):t.add(e);for(let t of Object.keys(_))!$.has(t)&&s.add(t);let o=u;if(g&&r("ltn",e,{add:t,rm:s,chg:n}),l(t)){let r={};i(t,(t=>r[o(t)]=e.__listen[t]=c.props[t])),v.on(r)}if(l(s)){let t={};i(s,(e=>t[o(e)]=_[e])),v.off(t),i(s,(t=>delete e.__listen[t]))}if(l(n)){let t={},r={};i(n,(e=>t[o(e)]=_[e])),v.off(t),i(n,(t=>r[o(t)]=e.__listen[t]=c.props[t])),v.on(r)}}}(f,d,p,m)}catch(t){return r(t,f,d,p,m),null}if(g(b,"obj")&&(y&&r("__vd-res",b),b.rm||b.tag)){if(f){let t;c(f),b.tag?(f.parentNode.replaceChild(t=e(d,y),f),f=t):f.remove()}return null}if(d.props?.html)return null;const w=Array.from(f.childNodes??[]),v=d.children,_=p?p?.children:[],E=Math.max(l(w),l(v));for(let t=0;t<E;t++){const e=h(w[t]??null,v[t]??null,_[t]??null,m);e&&(w[t]?w[t].isEqualNode(e)||(c(w[t]),w[t].parentNode.replaceChild(e,w[t])):f.append(e))}return f}const f=[];let d=!1;function p(e,r,s={}){f.push({rtEl:e,vEl:r,opt:s}),d||(d=!0,t.reqAnima(m))}function m(){for(;f.length>0;){const{rtEl:t,vEl:e,opt:r}=f.shift();g(t,e,r)}d=!1}function g(e,r,s={}){let n,i,{type:l}=t.utils,{shadow:o,debug:a}=s,u=l(e,"inst",t)?e.gt:l(e,"inst",HTMLElement)?e:new t(e).gt,c=l(r,"arr");if(i=o?u?.shadowRoot:c?u:u?.firstChild,c){let t=u?.children,e=Math.max(t?.length??0,r?.length??0);n=[];for(let o=0;o<e;o++){const e=h(t[o]??null,r[o]??null,l(u._chd,"arr")?u._chd[o]:null,s);null!==e&&0!=e&&(l(t[o],"obj")?e.isEqualNode(t[o])||i.replaceChild(e,t[o]):i.appendChild(e),n.push(e))}u._chd=[].concat(r)}else n=h(i,r,u._chd,s),u._chd={},Object.assign(u._chd,r),null==i&&null!=n&&(o||u).append(n);return a?{el:n,__ovt:r}:s.el?{el:n}:void 0}t.vdom=function(t,e,r={}){(r.force?g:p)(t,e,r)}})(e),e._State=t;const s=new e;function n(t){return s._(t)}s.g=s.get,s.l=s.log,s.h=s.hide,s.at=s.attr,s.fr=s.frame,s.make=s.mk;export{e as __o,r as _c,n as _n,s as _o};